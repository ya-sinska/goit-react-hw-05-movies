{"version":3,"file":"static/js/MovieDetailsPage.d95f523c.chunk.js","mappings":"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","sources":["hooks/useFetchMovie.js","hooks/useFetchVideo.js","components/Modal/Modal.styled.js","components/Modal/Modal.jsx","components/Movie/Movie.jsx","components/AdittionalInfo/AdittionalInfo.styled.js","components/AdittionalInfo/AdittionalInfo.jsx","pages/MovieDetailsPage/MovieDetailsPage.jsx","servises/moviesApi.js","servises/notify.js"],"sourcesContent":["import { useState, useEffect } from \"react\"\nimport { fetchMoviesById } from \"servises/moviesApi\"\nimport { notifi } from \"servises/notify\";\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\nexport const useFetchMovie = (id) => {\n    const [movie, setMovie] = useState([])\n    const [status, setStatus] = useState('');\n    useEffect(() => {\n        setStatus(Status.PENDING);\n        async function fetch() {\n            try {\n                const movie = await fetchMoviesById(id);\n                setMovie(movie);\n                setStatus(Status.RESOLVED);\n            }\n            catch (error) {\n                setStatus(Status.REJECTED);\n                console.log(error.message);\n                notifi(error.message);\n            }\n        }\n        fetch();\n    }, [id]);\n\n    return { movie, status };\n};","import { useState, useEffect } from \"react\"\nimport { fetchVideo } from 'servises/moviesApi';\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\nexport const useFetchVideo = (id) => {\n    const [video, setMovie] = useState([])\n    const [status, setStatus] = useState('');\n    useEffect(() => {\n        setStatus(Status.PENDING);\n        async function fetch() {\n            try {\n                const video = await fetchVideo(id);\n                setMovie(video);\n                setStatus(Status.RESOLVED);\n                if(video.length===0) return setStatus(Status.REJECTED);\n            }\n            catch (error) {\n                setStatus(Status.REJECTED);\n                console.log(error.message);   \n            }\n        }\n        fetch();\n    }, [id]);\n\n    return { video, status };\n};","import styled from \"@emotion/styled\";\nexport const Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 1200;\n`\nexport const ModalBox= styled.div` \n  max-width: calc(100vw - 300px);\n  max-height: calc(100vh - 50px);\n  background-color: white;\n`\nexport const ModalImage = styled.img`\nwidth:100%;\nheight: calc(100vh - 50px);\n`","import { useEffect, forwardRef} from 'react';\nimport PropTypes from 'prop-types';\nimport { Overlay, ModalBox } from \"./Modal.styled\"\nimport { createPortal } from 'react-dom';\n\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport const Modal = forwardRef(({ onClose, status, isModalOpen, trailer }, ref) => {\n    \n  useEffect(() => {\n   const handleKeyDown = e => {\n     if (e.code === 'Escape') {\n    onClose();\n    }};\n    window.addEventListener('keydown', handleKeyDown);\n    return () => {window.removeEventListener('keydown', handleKeyDown)} ;\n  },[onClose])\n\n const handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      onClose();\n    }\n };\n  return createPortal(\n      < >\n        \n      {isModalOpen && status===\"resolved\"&&(\n        <Overlay ref={ref}  onClick={handleBackdropClick}>\n            <ModalBox >         \n                    <iframe width=\"560\" height=\"315\" src={`https://www.youtube.com/embed/${trailer[0].key}`}\n                        title=\"YouTube video player\"\n                        frameBorder=\"0\"\n                        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                        allowFullScreen>\n                    </iframe>\n          </ModalBox>\n        </Overlay>)}\n    </>, modalRoot )\n  \n})\n\nModal.propTypes = {\n  onClose: PropTypes.func,\n  id: PropTypes.number,\n  isModalOpen: PropTypes.bool,\n}","import PropTypes from 'prop-types';\nimport { FilmContainer, GoBack, Btn, FilmDescription, Poster, Title, SubTitle, Text, GenresList, YouTybeImg, Container } from \"./Movie.styled\";\nimport image from \"../../Images/noPoster.jpg\"\nimport youTube from \"../../Images/yout.png\"\nimport { useState, createRef, useEffect} from 'react';\nimport { useFetchVideo } from 'hooks/useFetchVideo';\nimport { Modal } from 'components/Modal/Modal';\n\nconst imgBaseUrl = 'https://image.tmdb.org/t/p/w300';\n\nexport const Movie = ({ movie, label, onBackClick }) => {\n    const [modalOpen, setModalOpen] = useState(false);\n    const { video, status } = useFetchVideo(movie.id);\n    const ref = createRef();\n    \n     const openModal = (data) => {\n    setModalOpen(prevState => !prevState);\n    } \n    \n    useEffect(() => {\n        if (ref.current) {\n        document.body.style.top = `-${window.scrollY}px`\n        document.body.style.position = 'fixed' \n        } \n        return () => {\n        const scrollY = document.body.style.top\n        document.body.style.position = ''\n        document.body.style.top = ''\n        window.scrollTo(0, parseInt(scrollY || '0') * -1)\n  }\n    },[ref])\n    \n   \n\n    const { title, poster_path, genres, overview, vote_average} = movie;\n    return (\n        <div >\n            <Btn type='button' onClick={onBackClick} >{label? label:\"Go Back\"}<GoBack  /></Btn>\n            <FilmContainer >\n                <Container onClick={openModal}>\n                    {poster_path ? (<Poster  src={`${imgBaseUrl}${poster_path}`} alt={title} />) : (<Poster src={`${image}`} alt='no poster' />)}\n                    {status === \"resolved\" && <YouTybeImg src={youTube} alt=\"you tube\" />}\n                </Container>\n               \n                    <FilmDescription>\n                        <Title>{title}</Title>\n                        <Text>User score: <b>{vote_average}</b></Text>\n                        <SubTitle>Overview</SubTitle>\n                        {overview!==''?(<Text>{overview}</Text>):(<Text>No overview</Text>)}\n                        <SubTitle>Genres</SubTitle>\n                    {genres ? (genres.map(genre => <GenresList key={genre.id}>{genre.name}</GenresList>)) : (<Text>No genre</Text>)}\n                    </FilmDescription>\n            </FilmContainer >\n           \n            <Modal ref={ref} onClose={openModal} isModalOpen={modalOpen} trailer={video} status={ status}/>    \n        </div>\n    )\n}\n\nMovie.propTypes = {\n    movie: PropTypes.shape({\n        title: PropTypes.string,\n        poster_path: PropTypes.string,\n        genres: PropTypes.array,\n        overview: PropTypes.string,\n        vote_average: PropTypes.number,\n    }).isRequired,\n    onBackClick:PropTypes.func.isRequired,\n}\n","import styled from \"@emotion/styled\";\nimport { NavLink } from \"react-router-dom\"\nexport const Info = styled.div`\nmargin-top: 30px;\npadding: 15px;\nbox-shadow: 0px 0px 17px 0px rgba(255,185,43,0.66);\n`\nexport const Detail = styled(NavLink )`\ndisplay: block;\nfont-size:21px;\nfont-family: 'Permanent Marker', cursive;\nfont-weight:400;\ncolor: #fc7b03;\ntext-decoration:none;\n&:not(:last-child){\n    margin-bottom:10px;\n}\n  &.active {\n    font-size: 25px;\n    color: #ca7628;\n  }\n`\nexport const Title = styled.h2`\nfont-size:35px;\nfont-family: 'Permanent Marker', cursive;\nfont-weight:400;\ncolor: #fc7b03;\ntext-decoration:underline;\nmargin-top:0;\n`","import { Route, Routes } from \"react-router-dom\"\nimport { lazy, Suspense } from 'react';\nimport { Info, Title, Detail } from \"./AdittionalInfo.styled\"\nconst Cast = lazy(() => import('pages/Cast/Cast' /* webpackChunkName: \"Cast\"*/));\nconst Reviews = lazy(() => import('pages/Reviews/Reviews' /* webpackChunkName: \"Reviews\"*/));\nexport const AdittionalInfo = () => {\n    return (\n            <Info>\n                <Title>Adittional information</Title>\n                <Detail to={\"cast\"}>Actors</Detail>\n                <Detail to={\"reviews\"}>Reviews</Detail>\n            <Suspense>\n                <Routes>\n                    <Route path='cast' element={<Cast/>} />\n                    <Route path='reviews' element={<Reviews />} />\n                </Routes>\n            </Suspense>\n\n\n            </Info>\n    )\n}","\nimport { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { useFetchMovie } from \"hooks/useFetchMovie\";\nimport { Loader } from \"components/Loader/Loader\";\nimport { Movie } from \"components/Movie/Movie\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { AdittionalInfo } from \"components/AdittionalInfo/AdittionalInfo\";\nexport default function MovieDetailsPage () {\n    const [btnLabel, setBtnLabel] = useState(\"\");\n    const { slug } = useParams();\n    const movieId = slug.match(/[a-z0-9]+$/)[0];\n    const { movie, status } = useFetchMovie(movieId);\n    const location = useLocation();\n    const navigate = useNavigate();\n    const onBackHandle = () => {\n        location?.state?.from?.location?navigate(location.state.from.location):navigate('/')\n    }\n    useEffect(() => {\n        if (location.state?.from?.label) {\n            setBtnLabel(location.state.from.label)\n        }\n    }, [location.state])\n\n    return (\n     <>\n        {status === 'pending' && <Loader />}\n            {status === 'resolved' &&\n                <>\n                <Movie movie={movie} label={btnLabel} onBackClick={onBackHandle }/>\n                <AdittionalInfo/>\n                </>}\n        {status === 'rejected' && <h2>Sorry can't find this page</h2>}\n    </>  \n    \n\n\n    )\n}","import axios from \"axios\";\n\nexport const fetchMovies = async () => {\n\n    const data = await axios.get(`https://api.themoviedb.org/3/trending/movie/day?api_key=4a5a1e8e9c9af768c9d74bb009ae596f`);\n    return data.data.results\n\n}\n\nexport const fetchMoviesById = async (id) => {\n\n    const data = await axios.get(`https://api.themoviedb.org/3/movie/${id}?api_key=4a5a1e8e9c9af768c9d74bb009ae596f`);\n    return data.data\n \n}\n\nexport const fetchReviewsById = async (id) => {\n\n    const data = await axios.get(`https://api.themoviedb.org/3/movie/${id}/reviews?api_key=4a5a1e8e9c9af768c9d74bb009ae596f`);\n    return data.data.results\n\n}\nexport const fetchCastsById = async (id) => {\n \n    const data = await axios.get(`https://api.themoviedb.org/3/movie/${id}/credits?api_key=4a5a1e8e9c9af768c9d74bb009ae596f`);\n    return data.data\n\n}\n\nexport const fetchMoviesByQuery = async (query) => {\n\n    const data = await axios.get(`https://api.themoviedb.org/3/search/movie?api_key=4a5a1e8e9c9af768c9d74bb009ae596f&query=${query}`);\n    return data.data.results\n \n}\n\nexport const fetchVideo = async (id) => {\n\n    const data = await axios.get(`https://api.themoviedb.org/3/movie/${id}/videos?api_key=4a5a1e8e9c9af768c9d74bb009ae596f`);\n    return data.data.results\n \n}\n// https://api.themoviedb.org/3/movie/550?api_key=4a5a1e8e9c9af768c9d74bb009ae596f","import { toast } from 'react-toastify';\nexport const notifi = (text) => toast.error(text, {\n    autoClose: 3000,\n});"],"names":["Status","Overlay","styled","ModalBox","modalRoot","document","querySelector","Modal","forwardRef","ref","onClose","status","isModalOpen","trailer","useEffect","handleKeyDown","e","code","window","addEventListener","removeEventListener","createPortal","onClick","event","currentTarget","target","width","height","src","key","title","frameBorder","allow","allowFullScreen","Movie","movie","label","onBackClick","useState","modalOpen","setModalOpen","id","video","setMovie","setStatus","fetchVideo","length","console","log","message","fetch","useFetchVideo","createRef","openModal","data","prevState","current","body","style","top","scrollY","position","scrollTo","parseInt","poster_path","genres","overview","vote_average","type","alt","image","youTube","map","genre","name","Info","Detail","NavLink","Title","Cast","lazy","Reviews","AdittionalInfo","to","Suspense","path","element","MovieDetailsPage","btnLabel","setBtnLabel","fetchMoviesById","notifi","useFetchMovie","useParams","slug","match","location","useLocation","navigate","useNavigate","state","from","Loader","fetchMovies","axios","results","fetchReviewsById","fetchCastsById","fetchMoviesByQuery","query","text","toast","autoClose"],"sourceRoot":""}