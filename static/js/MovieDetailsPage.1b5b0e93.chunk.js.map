{"version":3,"file":"static/js/MovieDetailsPage.1b5b0e93.chunk.js","mappings":"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","sources":["hooks/useFetchMovie.js","components/Modal/Modal.styled.js","hooks/useFetchVideo.js","components/Modal/Modal.jsx","components/Movie/Movie.jsx","components/AdittionalInfo/AdittionalInfo.styled.js","components/AdittionalInfo/AdittionalInfo.jsx","pages/MovieDetailsPage/MovieDetailsPage.jsx","servises/moviesApi.js","servises/notify.js"],"sourcesContent":["import { useState, useEffect } from \"react\"\nimport { fetchMoviesById } from \"servises/moviesApi\"\nimport { notifi } from \"servises/notify\";\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\nexport const useFetchMovie = (id) => {\n    const [movie, setMovie] = useState([])\n    const [status, setStatus] = useState('');\n    useEffect(() => {\n        setStatus(Status.PENDING);\n        async function fetch() {\n            try {\n                const movie = await fetchMoviesById(id);\n                setMovie(movie);\n                setStatus(Status.RESOLVED);\n            }\n            catch (error) {\n                setStatus(Status.REJECTED);\n                console.log(error.message);\n                notifi(error.message);\n            }\n        }\n        fetch();\n    }, [id]);\n\n    return { movie, status };\n};","import styled from \"@emotion/styled\";\nexport const Overlay = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 1200;\n`\nexport const ModalBox= styled.div` \n  max-width: calc(100vw - 300px);\n  max-height: calc(100vh - 50px);\n  background-color: white;\n`\nexport const ModalImage = styled.img`\nwidth:100%;\nheight: calc(100vh - 50px);\n`","import { useState, useEffect } from \"react\"\nimport { fetchVideo } from 'servises/moviesApi';\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\nexport const useFetchVideo = (id) => {\n    const [movie, setMovie] = useState([])\n    const [status, setStatus] = useState('');\n    useEffect(() => {\n        setStatus(Status.PENDING);\n        async function fetch() {\n            try {\n                const movie = await fetchVideo(id);\n                setMovie(movie);\n                setStatus(Status.RESOLVED);\n                if(movie.length===0) return setStatus(Status.REJECTED);\n            }\n            catch (error) {\n                setStatus(Status.REJECTED);\n                console.log(error.message);   \n            }\n        }\n        fetch();\n    }, [id]);\n\n    return { movie, status };\n};","import { useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport { Overlay, ModalBox } from \"./Modal.styled\"\nimport { Loader } from 'components/Loader/Loader';\nimport { NoFetchResults } from 'components/NoFetchResults/NoFetchResults';\nimport { createPortal } from 'react-dom';\nimport { useFetchVideo } from 'hooks/useFetchVideo';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport const Modal = ({ onClose, id, isModalOpen }) => {\nconst { movie, status } = useFetchVideo(id);\n\n  useEffect(() => {\n   const handleKeyDown = e => {\n     if (e.code === 'Escape') {\n    onClose();\n    }};\n    window.addEventListener('keydown', handleKeyDown);\n    return () => {window.removeEventListener('keydown', handleKeyDown)} ;\n  },[onClose])\n\n const handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      onClose();\n    }\n };\n  return createPortal(\n    <>\n      {isModalOpen && (\n        <Overlay onClick={handleBackdropClick}>\n            <ModalBox>         \n                {status === 'pending' && <Loader />}\n                {status === 'resolved' &&\n                    <iframe width=\"560\" height=\"315\" src={`https://www.youtube.com/embed/${movie[0].key}`}\n                        title=\"YouTube video player\"\n                        frameBorder=\"0\"\n                        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                        allowFullScreen>\n                    </iframe>}\n                {status === 'rejected' && <NoFetchResults text={\"Sorry can't find this page:(\"}/>}\n        \n          </ModalBox>\n        </Overlay>)}\n    </>, modalRoot)\n  \n}\n\nModal.propTypes = {\n  onClose: PropTypes.func,\n  id: PropTypes.number,\n  isModalOpen: PropTypes.bool,\n}","import PropTypes from 'prop-types';\nimport { FilmContainer, GoBack, Btn, FilmDescription, Poster, Title, SubTitle, Text, GenresList } from \"./Movie.styled\";\nimport image from \"../../Images/noPoster.jpg\"\nimport { useState } from 'react';\nimport { Modal } from 'components/Modal/Modal';\nconst imgBaseUrl = 'https://image.tmdb.org/t/p/w300';\n\nexport const Movie = ({ movie, label, onBackClick }) => {\n    const [modalOpen, setModalOpen] = useState(false);\n    const openModal = (data) => {\n    setModalOpen(prevState => !prevState);\n    } \n    const { title, poster_path, genres, overview, vote_average, id} = movie;\n    return (\n        <div>\n            <Btn type='button' onClick={onBackClick} >{label? label:\"Go Back\"}<GoBack  /></Btn>\n            <FilmContainer >\n               {poster_path? (<Poster onClick={openModal} src={`${imgBaseUrl}${poster_path}`} alt={title} />):(<Poster src={`${image}`} alt='no poster'/>) }\n                    <FilmDescription>\n                        <Title>{title}</Title>\n                        <Text>User score: <b>{vote_average}</b></Text>\n                        <SubTitle>Overview</SubTitle>\n                        {overview!==''?(<Text>{overview}</Text>):(<Text>No overview</Text>)}\n                        <SubTitle>Genres</SubTitle>\n                    {genres ? (genres.map(genre => <GenresList key={genre.id}>{genre.name}</GenresList>)) : (<Text>No genre</Text>)}\n                    </FilmDescription>\n            </FilmContainer >\n            <Modal onClose={openModal} isModalOpen={modalOpen} id={id}/>\n        </div>\n    )\n}\n\nMovie.propTypes = {\n    movie: PropTypes.shape({\n        title: PropTypes.string,\n        poster_path: PropTypes.string,\n        genres: PropTypes.array,\n        overview: PropTypes.string,\n        vote_average: PropTypes.number,\n    }).isRequired,\n    onBackClick:PropTypes.func.isRequired,\n}\n","import styled from \"@emotion/styled\";\nimport { NavLink } from \"react-router-dom\"\nexport const Info = styled.div`\nmargin-top: 30px;\npadding: 15px;\nbox-shadow: 0px 0px 17px 0px rgba(255,185,43,0.66);\n`\nexport const Detail = styled(NavLink )`\ndisplay: block;\nfont-size:21px;\nfont-family: 'Permanent Marker', cursive;\nfont-weight:400;\ncolor: #fc7b03;\ntext-decoration:none;\n&:not(:last-child){\n    margin-bottom:10px;\n}\n  &.active {\n    font-size: 25px;\n    color: #ca7628;\n  }\n`\nexport const Title = styled.h2`\nfont-size:35px;\nfont-family: 'Permanent Marker', cursive;\nfont-weight:400;\ncolor: #fc7b03;\ntext-decoration:underline;\nmargin-top:0;\n`","import { Route, Routes } from \"react-router-dom\"\nimport { lazy, Suspense } from 'react';\nimport { Info, Title, Detail } from \"./AdittionalInfo.styled\"\nconst Cast = lazy(() => import('pages/Cast/Cast' /* webpackChunkName: \"Cast\"*/));\nconst Reviews = lazy(() => import('pages/Reviews/Reviews' /* webpackChunkName: \"Reviews\"*/));\nexport const AdittionalInfo = () => {\n    return (\n            <Info>\n                <Title>Adittional information</Title>\n                <Detail to={\"cast\"}>Actors</Detail>\n                <Detail to={\"reviews\"}>Reviews</Detail>\n            <Suspense>\n                <Routes>\n                    <Route path='cast' element={<Cast/>} />\n                    <Route path='reviews' element={<Reviews />} />\n                </Routes>\n            </Suspense>\n\n\n            </Info>\n    )\n}","\nimport { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport { useFetchMovie } from \"hooks/useFetchMovie\";\nimport { Loader } from \"components/Loader/Loader\";\nimport { Movie } from \"components/Movie/Movie\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { AdittionalInfo } from \"components/AdittionalInfo/AdittionalInfo\";\nexport default function MovieDetailsPage () {\n    const [btnLabel, setBtnLabel] = useState(\"\");\n    const { slug } = useParams();\n    const movieId = slug.match(/[a-z0-9]+$/)[0];\n    const { movie, status } = useFetchMovie(movieId);\n    const location = useLocation();\n    const navigate = useNavigate();\n    const onBackHandle = () => {\n        location?.state?.from?.location?navigate(location.state.from.location):navigate('/')\n    }\n    useEffect(() => {\n        if (location.state?.from?.label) {\n            setBtnLabel(location.state.from.label)\n        }\n    }, [location.state])\n\n    return (\n     <>\n        {status === 'pending' && <Loader />}\n            {status === 'resolved' &&\n                <>\n                <Movie movie={movie} label={btnLabel} onBackClick={onBackHandle }/>\n                <AdittionalInfo/>\n                </>}\n        {status === 'rejected' && <h2>Sorry can't find this page</h2>}\n    </>  \n    \n\n\n    )\n}","import axios from \"axios\";\n\nexport const fetchMovies = async () => {\n\n    const data = await axios.get(`https://api.themoviedb.org/3/trending/movie/day?api_key=4a5a1e8e9c9af768c9d74bb009ae596f`);\n    return data.data.results\n\n}\n\nexport const fetchMoviesById = async (id) => {\n\n    const data = await axios.get(`https://api.themoviedb.org/3/movie/${id}?api_key=4a5a1e8e9c9af768c9d74bb009ae596f`);\n    return data.data\n \n}\n\nexport const fetchReviewsById = async (id) => {\n\n    const data = await axios.get(`https://api.themoviedb.org/3/movie/${id}/reviews?api_key=4a5a1e8e9c9af768c9d74bb009ae596f`);\n    return data.data.results\n\n}\nexport const fetchCastsById = async (id) => {\n \n    const data = await axios.get(`https://api.themoviedb.org/3/movie/${id}/credits?api_key=4a5a1e8e9c9af768c9d74bb009ae596f`);\n    return data.data\n\n}\n\nexport const fetchMoviesByQuery = async (query) => {\n\n    const data = await axios.get(`https://api.themoviedb.org/3/search/movie?api_key=4a5a1e8e9c9af768c9d74bb009ae596f&query=${query}`);\n    return data.data.results\n \n}\n\nexport const fetchVideo = async (id) => {\n\n    const data = await axios.get(`https://api.themoviedb.org/3/movie/${id}/videos?api_key=4a5a1e8e9c9af768c9d74bb009ae596f`);\n    return data.data.results\n \n}\n// https://api.themoviedb.org/3/movie/550?api_key=4a5a1e8e9c9af768c9d74bb009ae596f","import { toast } from 'react-toastify';\nexport const notifi = (text) => toast.error(text, {\n    autoClose: 3000,\n});"],"names":["Status","Overlay","styled","ModalBox","modalRoot","document","querySelector","Modal","onClose","id","isModalOpen","useState","movie","setMovie","status","setStatus","useEffect","fetchVideo","length","console","log","message","fetch","useFetchVideo","handleKeyDown","e","code","window","addEventListener","removeEventListener","createPortal","onClick","event","currentTarget","target","Loader","width","height","src","key","title","frameBorder","allow","allowFullScreen","NoFetchResults","text","Movie","label","onBackClick","modalOpen","setModalOpen","openModal","data","prevState","poster_path","genres","overview","vote_average","type","alt","image","map","genre","name","Info","Detail","NavLink","Title","Cast","lazy","Reviews","AdittionalInfo","to","Suspense","path","element","MovieDetailsPage","btnLabel","setBtnLabel","fetchMoviesById","notifi","useFetchMovie","useParams","slug","match","location","useLocation","navigate","useNavigate","state","from","fetchMovies","axios","results","fetchReviewsById","fetchCastsById","fetchMoviesByQuery","query","toast","autoClose"],"sourceRoot":""}